<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Universal Language Translator</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
    select, textarea, button { padding: 10px; margin: 5px 0; width: 100%; max-width: 500px; display: block; }
    button { cursor: pointer; background: #4CAF50; color: white; border: none; }
    .container { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
  </style>
</head>
<body>
  <div class="container">
    <h2>🌍 Universal Language Translator</h2>

    <label for="sourceLang">Select Source Language:</label>
    <select id="sourceLang"></select>

    <label for="targetLang">Select Target Language:</label>
    <select id="targetLang"></select>

    <label for="text">Enter Text:</label>
    <textarea id="text" rows="5" placeholder="Type text here..."></textarea>

    <button onclick="translateText()">Translate</button>

    <h3>Translated Text:</h3>
    <textarea id="translatedText" rows="5" readonly></textarea>
    <button onclick="copyText()">📋 Copy</button>
    <button onclick="speakText()">🔊 Speak</button>
  </div>

  <script>
    const languageList = {
      "af": "Afrikaans", "sq": "Albanian", "am": "Amharic", "ar": "Arabic",
      "hy": "Armenian", "az": "Azerbaijani", "eu": "Basque", "be": "Belarusian",
      "bn": "Bengali", "bs": "Bosnian", "bg": "Bulgarian", "ca": "Catalan",
      "ceb": "Cebuano", "ny": "Chichewa", "zh-CN": "Chinese (Simplified)", "zh-TW": "Chinese (Traditional)",
      "co": "Corsican", "hr": "Croatian", "cs": "Czech", "da": "Danish",
      "nl": "Dutch", "en": "English", "eo": "Esperanto", "et": "Estonian",
      "tl": "Filipino", "fi": "Finnish", "fr": "French", "fy": "Frisian",
      "gl": "Galician", "ka": "Georgian", "de": "German", "el": "Greek",
      "gu": "Gujarati", "ht": "Haitian Creole", "ha": "Hausa", "haw": "Hawaiian",
      "iw": "Hebrew", "hi": "Hindi", "hmn": "Hmong", "hu": "Hungarian",
      "is": "Icelandic", "ig": "Igbo", "id": "Indonesian", "ga": "Irish",
      "it": "Italian", "ja": "Japanese", "jw": "Javanese", "kn": "Kannada",
      "kk": "Kazakh", "km": "Khmer", "ko": "Korean", "ku": "Kurdish (Kurmanji)",
      "ky": "Kyrgyz", "lo": "Lao", "la": "Latin", "lv": "Latvian",
      "lt": "Lithuanian", "lb": "Luxembourgish", "mk": "Macedonian", "mg": "Malagasy",
      "ms": "Malay", "ml": "Malayalam", "mt": "Maltese", "mi": "Maori",
      "mr": "Marathi", "mn": "Mongolian", "my": "Myanmar (Burmese)", "ne": "Nepali",
      "no": "Norwegian", "ps": "Pashto", "fa": "Persian", "pl": "Polish",
      "pt": "Portuguese", "pa": "Punjabi", "ro": "Romanian", "ru": "Russian",
      "sm": "Samoan", "gd": "Scots Gaelic", "sr": "Serbian", "st": "Sesotho",
      "sn": "Shona", "sd": "Sindhi", "si": "Sinhala", "sk": "Slovak",
      "sl": "Slovenian", "so": "Somali", "es": "Spanish", "su": "Sundanese",
      "sw": "Swahili", "sv": "Swedish", "tg": "Tajik", "ta": "Tamil",
      "te": "Telugu", "th": "Thai", "tr": "Turkish", "uk": "Ukrainian",
      "ur": "Urdu", "uz": "Uzbek", "vi": "Vietnamese", "cy": "Welsh",
      "xh": "Xhosa", "yi": "Yiddish", "yo": "Yoruba", "zu": "Zulu"
    };

    const sourceSelect = document.getElementById('sourceLang');
    const targetSelect = document.getElementById('targetLang');

    for (let code in languageList) {
      const option1 = new Option(languageList[code], code);
      const option2 = new Option(languageList[code], code);
      sourceSelect.add(option1);
      targetSelect.add(option2);
    }
    sourceSelect.value = 'en';
    targetSelect.value = 'hi';

    async function translateText() {
      const text = document.getElementById('text').value;
      const source = sourceSelect.value;
      const target = targetSelect.value;
      const url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=${source}&tl=${target}&dt=t&q=${encodeURIComponent(text)}`;

      try {
        const res = await fetch(url);
        const data = await res.json();
        document.getElementById('translatedText').value = data[0].map(t => t[0]).join(' ');
      } catch (err) {
        alert("Translation failed: " + err);
      }
    }

    function copyText() {
      const text = document.getElementById('translatedText');
      text.select();
      document.execCommand('copy');
    }

    // preload voices
    let availableVoices = [];
    function loadVoices() {
      availableVoices = speechSynthesis.getVoices();
    }
    speechSynthesis.onvoiceschanged = loadVoices;

    function speakText() {
      const text = document.getElementById('translatedText').value;
      
      if (!('speechSynthesis' in window)) {
        alert("Sorry, your browser doesn't support text-to-speech.");
        return;
      }

      if (!text.trim()) {
        alert("Please translate some text first!");
        return;
      }

      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = targetSelect.value;

      const match = availableVoices.find(voice => voice.lang.toLowerCase().startsWith(targetSelect.value.toLowerCase()));
      if (match) utterance.voice = match;

      utterance.rate = 1;
      utterance.pitch = 1;

      speechSynthesis.speak(utterance);
    }
  </script>
</body>
</html>
